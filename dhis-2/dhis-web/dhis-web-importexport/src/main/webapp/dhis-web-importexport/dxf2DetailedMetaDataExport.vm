<script type="text/javascript">
    var i18n_export = '$i18n.getString( "export" )';
    var i18n_edit = '$i18n.getString( "edit" )';
    var i18n_remove = '$i18n.getString( "remove" )';
</script>

##@author Ovidiu Rosu <rosu.ovi@gmail.com>

<h3>$i18n.getString( "metadata_detailed_export" ) #openHelp( "filter" )</h3>

<div id="mainDivFilter" style="width: 70%;">
    <table class="mainPageTable">
        <tr>
            <td style="vertical-align:top">
                <table width="100%">
                    <tr>
                        <td>#filterDiv( "dxf2DetailedMetaDataExport" )</td>
                        <td colspan="9" style="text-align:right">
                            <form id="formFilter" method="POST" action="filterExportForm.action">
                                <input type="hidden" name="name" value=""/>
                                <input type="hidden" name="uid" value=""/>
                                <input type="hidden" name="code" value=""/>
                                <input type="hidden" name="metaDataUids" value=''/>
                                <input type="hidden" name="command" value=""/>
                                <input type="button" value="$i18n.getString( 'sort' )" onclick="window.location.href='showSortFilterForm.action';" style="width: 80px;"/>
                                <input type="button" value="$i18n.getString( "add_new" )" onclick="submitFilterForm( 'addNew' );" style="width: 80px;"/>
                                <input type="button" value="$i18n.getString( "add_ad_hoc_filter" )" onclick="submitFilterForm( 'addAdHoc' );" style="width: 140px;"/>
                            </form>
                        </td>
                    </tr>
                </table>

                <!-- FILTER TABLE -->
                <table id="filterList" class="listTable">
                    <col/>
                    <col width="115"/>
                    <thead>
                    <tr>
                        <th>$i18n.getString( "name" )</th>
                        <th class="{sorter: false}">$i18n.getString( "operations" )</th>
                    </tr>
                    </thead>
                    <tbody id="filterTableBody">
                    #foreach( $filter in $filters )
                    <tr id="tr${filter.uid}">
                        <td>$filter.name</td>
                        <td>
                            <a href="javascript:exportFilterButton( '$filter.uid' );" title="$i18n.getString( 'export' )"><img src="../images/start_process.png" alt="$i18n.getString( 'export' )"/></a>
                            <a href="javascript:editFilterButton( '$filter.uid' );" title="$i18n.getString( 'edit' )"><img src="../images/edit.png" alt="$i18n.getString( 'edit' )"/></a>
                            <a href="javascript:removeFilterButton( '$filter.uid' );" title="$i18n.getString( 'remove' )"><img src="../images/delete.png" alt="$i18n.getString( 'remove' )"/></a>
                            <a href="javascript:showFilterDetails( '$filter.uid' );" title="$i18n.getString( 'show_details' )"><img src="../images/information.png" alt="$i18n.getString( 'show_details' )"/></a>
                        </td>
                    </tr>
                    #end
                    </tbody>
                </table>
                <p></p>
                #parse( "/dhis-web-commons/paging/paging.vm" )
            </td>
            <td id="detailsData">
                <div id="detailsArea" style="display: none;">
                    <div id="hideDetailsArea">
                        <a href="javascript:hideDetails();" title="$i18n.getString( 'hide_details' )"><img src="../images/hide.png" alt="$i18n.getString( 'hide_details' )"/></a>
                    </div>
                    <p><label>$i18n.getString( "name" ):</label><br/><span id="nameField"></span></p>
                </div>
            </td>
        </tr>
    </table>
</div>

<!-- EXPORT DIALOG -->
<div id="exportDialog" style="display: none;">
    <table>
        <tr>
            <td colspan="2">
                <select id="format" style="width: 250px; font-size: 10pt;">
                    <option value="Xml">XML</option>
                    <option value="Json">Json</option>
                </select>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <select id="compression" style="width: 250px; font-size: 10pt;">
                    <option value="zip">Zipped</option>
                    <option value="gz">GZipped</option>
                    <option value="uncompressed">Uncompressed</option>
                </select>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="checkbox" id="exportDependencies" name="exportDependencies"/>
                <label for="exportDependencies" style="font-size: 10pt;">$i18n.getString( "export_with_dependencies" ) #openHelp( "exportDependencies" )</label>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="hidden" id="exportJson" value=''/>
                <input type="button" value="$i18n.getString( 'export' )" style="width:250px; font-size: 10pt;" onclick="exportDetailedMetaData();"/>
            </td>
        </tr>
    </table>
</div>
