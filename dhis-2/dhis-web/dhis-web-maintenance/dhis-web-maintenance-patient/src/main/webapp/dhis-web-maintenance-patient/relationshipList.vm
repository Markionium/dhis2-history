
<p align="right">
    <input type="button" value="$i18n.getString( "close" )" onclick="window.close()" style="width:10em">
</p>

<h3>$i18n.getString( "relationship_s_for" )</h3>

<form id="relationshipList" name="relationshipList">

<div>
    <input type="hidden" id="id" name="id" value="$patient.id">    
</div>

<table>
    <tr>
        <td><strong>$i18n.getString( "full_name" ):</strong></td>
        <td>           
            $encoder.htmlEncode( $patient.getFullName() )  
        </td>
    </tr>
    <tr>
        <td><strong>$i18n.getString( "gender" ):</strong></td>
        <td>            
            $encoder.htmlEncode( $patient.gender )
        </td>
    </tr>    
    <tr>
        <td><strong>$i18n.getString( "date_of_birth" ):</strong></td>
        <td>            
            $format.formatDate( $patient.birthDate )
        </td>
    </tr>
    <tr>
        <td><strong>$i18n.getString( "age" ):</strong></td>
        <td>            
            $encoder.htmlEncode( $patient.getAge() )
        </td>
    </tr>     
    <tr>
        <td>&nbsp;</td>
    </tr>
        
</table>

<table class="mainPageTable">
    <tr>
        <td style="vertical-align:top">
            <table class="listTable">
                <col>
                <col>
                <col width="20">
                <col width="20">
                
                <tr>
                    <td></td>
                    <td></td> 
                    <td colspan="2" style="text-align:right">
                        <input type="button" value="$i18n.getString( "add_new" )" onclick="javascript:showAddRelationship()"><br>                        
                        <input type="button" value="$i18n.getString( "save_representative" )" onclick="javascript:saveRepresentativeRelationship()">                                       
                    </td>
                </tr>
          
                <tr>            
                    <th>$i18n.getString( "relationship" )</th>
                    <th>$i18n.getString( "full_name" )</th>
                    <th colspan="3">$i18n.getString( "operations" )</th>
                </tr>
                <tbody id="list">                
                    #set( $mark = false )
                    #foreach( $relationship in $relationships )
                        <tr>    
                            #if( $relationship.patientA.id == $patient.id )          
                                <td#alternate( $mark )>                                
                                    $encoder.htmlEncode( $relationship.relationshipType.BIsToA )
                                </td>
                                            
                                <td#alternate( $mark )>
                                    $encoder.htmlEncode( $relationship.patientB.getFullName() )
                                </td>
                            #elseif($relationship.patientB.id == $patient.id )
                                  <td#alternate( $mark )>                                
                                    $encoder.htmlEncode( $relationship.relationshipType.AIsToB )
                                </td>
                                            
                                <td#alternate( $mark )>
                                    $encoder.htmlEncode( $relationship.patientA.getFullName() )
                                </td>
                            #end    
                            <td style="text-align:center"#alternate( $mark )>
                                <input type="radio" id="representative" name="representative" value="$relationship.id">$i18n.getString( "representative" )                                 
                            </td>                
 
                            <td style="text-align:center"#alternate( $mark )>
                                <a href="javascript:removeRelationship( '$relationship.id', '$encoder.jsEncode( $relationship.patientA.getFullName() )', '$encoder.jsEncode( $relationship.relationshipType.aIsToB )', '$encoder.jsEncode( $relationship.patientB.getFullName() )' )" title="$i18n.getString( "remove" )"><img src="../images/delete.png" alt="$i18n.getString( "remove" )"></a>
                            </td>               
                        </tr>
                        #if( $mark )
                            #set( $mark = false )
                        #else
                            #set( $mark = true )
                        #end
                    #end
                </tbody>
            </table>
        </td>       
    </tr>    
</table>

</form>

<span id="message"></span>

<script type="text/javascript">
    var i18n_confirm_delete_relationship = '$encoder.jsEscape( $i18n.getString( "confirm_delete_relationship" ) , "'" )';
    var i18n_please_select_a_representative = '$encoder.jsEscape( $i18n.getString( "please_select_a_representative" ) , "'" )';            
</script>

