
<p align="right">
    <input type="button" value="$i18n.getString( "close" )" onclick="window.close()" style="width:10em">
</p>

<h3>$i18n.getString( "relationship_management_for" )</h3>

<table>
    <tr>
        <td><strong>$i18n.getString( "full_name" ):</strong></td>
        <td>           
            $encoder.htmlEncode( $patient.getFullName() )  
        </td>
    </tr>
    <tr>
        <td><strong>$i18n.getString( "gender" ):</strong></td>
        <td>            
            $encoder.htmlEncode( $patient.gender )
        </td>
    </tr>    
    <tr>
        <td><strong>$i18n.getString( "date_of_birth" ):</strong></td>
        <td>            
            $format.formatDate( $patient.birthDate )
        </td>
    </tr>
    <tr>
        <td><strong>$i18n.getString( "age" ):</strong></td>
        <td>            
            $encoder.htmlEncode( $patient.getAge() )
        </td>
    </tr>     
    <tr>
        <td>&nbsp;</td>
    </tr>
        
</table>

<table class="mainPageTable">
    <tr>
        <td style="vertical-align:top">
            <table class="listTable">
                <col>
                <col>
                <col width="20">
                <col width="20">
                
                <tr>
                    <td></td>
                    <td></td> 
                    <td colspan="2" style="text-align:right">                        
                        <input type="button" value="$i18n.getString( "add_new" )" onclick="javascript:addRelationship( '$patient.id' )">               
                    </td>
                </tr>
          
                <tr>            
                    <th>$i18n.getString( "relationship" )</th>
                    <th>$i18n.getString( "full_name" )</th>
                    <th colspan="3">$i18n.getString( "operations" )</th>
                </tr>
                <tbody id="list">                
                    #set( $mark = false )
                    #foreach( $relationship in $relationships )
                        <tr>              
                            <td#alternate( $mark )>$encoder.htmlEncode( $relationship.relationshipType.bIsToA )</td>                
                            <td#alternate( $mark )>$encoder.htmlEncode( $relationship.personB.getFullName() )</td>
                
                            <td style="text-align:center"#alternate( $mark )>
                                <a href="showUpdateRelationshipForm.action?id=$relationship.id" title="$i18n.getString( "edit" )"><img src="../images/edit.png" alt="$i18n.getString( "edit" )"></a>
                            </td>                
 
                            <td style="text-align:center"#alternate( $mark )>
                                <a href="javascript:removeRelationship( '$relationship.id', '$encoder.jsEncode( $relationship.personA.getFullName() )', '$encoder.jsEncode( $relationship.relationshipType.aIsToB )', '$encoder.jsEncode( $relationship.personB.getFullName() )' )" title="$i18n.getString( "remove" )"><img src="../images/delete.png" alt="$i18n.getString( "remove" )"></a>
                            </td>               
                        </tr>
                        #if( $mark )
                            #set( $mark = false )
                        #else
                            #set( $mark = true )
                        #end
                    #end
                </tbody>
            </table>
        </td>       
    </tr>    
</table>
<span id="message"></span>
